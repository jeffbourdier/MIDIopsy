<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8" />
    <title>MIDIopsy Help</title>
    <meta name="author" content="Jeff Bourdier" />
    <style>
      h1, h6 { text-align: center; }
      h2, h6 { border-top: 1px solid; padding-top: 4px; }
      table { margin: auto; border-collapse: collapse; }
      table, th, td { border: 1px solid black; padding: 4px; }
      table caption { font-weight: bold; font-size: larger; padding: 4px; }
      th, blockquote { background-color: silver; }
      blockquote { padding: 8px; }
    </style>
  </head>
  <body>
    <h1>MIDIopsy Help</h1>
    <h2>What is MIDIopsy?</h2>
    <p>MIDIopsy is used to view, edit, and play MIDI files.  The user is assumed to be familiar with the standard MIDI file format.  (For more information, see <b>Online Resources</b> at the bottom of this page.)</p>
    <p>The user interface has an "opening screen" and an "editing screen."  When the application is launched, the opening screen is shown.</p>
    <p style="text-align: center;">
      <img alt="Opening Screen" src="OpeningScreen.png" /><br />
      <i>Opening Screen</i>
    </p>
    <p>When a file is open, it is shown in the editing screen.  The file contents are divided up into rows within a grid/list view.  Chunks are separated by empty rows (which cannot be selected).  Each row within a track chunk represents an MTrk event.</p>
    <p style="text-align: center;">
      <img alt="Editing Screen" src="EditingScreen.png" /><br />
      <i>Editing Screen</i>
    </p>
    <p>The leftmost column contains the binary contents of the file (in hexadecimal format), while the other columns contain user-friendly comments.  (Note that <b>Total Time</b> is not stored in the file; it is calculated from <b>Delta-time</b>.)  Column widths can be adjusted as desired.  To exit the editing screen and return to the opening screen (effectively closing the file), click <b>Done</b> (or press Esc).</p>
    <h2>Opening Screen Commands</h2>
    <p>These commands can be executed from the opening screen.</p>
    <h3>Open an existing MIDI file</h3>
    <ul>
      <li>Click <b>Open</b> (or press Ctrl+O).</li>
      <li>A file that has been opened recently can be reopened directly from the opening screen.  Under <b>Open Recent</b>, simply click the file path (or press the corresponding number key).</li>
    </ul>
    <h3>Create a new MIDI file</h3>
    <ol>
      <li>Click <b>New</b> (or press Ctrl+N).</li>
      <li>Specify the <b><u>F</u>ormat</b>.</li>
      <li>If the format is 1 (one or more simultaneous tracks) or 2 (one or more independent tracks), specify the <b><u>N</u>umber of tracks</b>.</li>
      <li>Under <b>Delta-time division</b>, check either <b><u>M</u>etrical time</b> or <b><u>T</u>ime-code-based time</b>.
        <ul>
          <li>For metrical time, specify the <b>Ticks per <u>q</u>uarter note</b>.</li>
          <li>For time-code-based time, specify the <b><u>S</u>MPTE format (frames per second)</b> and <b><u>R</u>esolution (ticks per frame)</b>.</li>
        </ul>
      </li>
      <li>Click <b>OK</b> (or press Enter).  The editing screen is shown with a new MThd (header) chunk created as specified, along with the specified number of MTrk (track) chunks, each with an End of Track meta-event.</li>
    </ol>
    <h2>Editing Screen Commands</h2>
    <p>These commands can be executed from the editing screen (when a file is open).</p>
    <h3>Save a MIDI file</h3>
    <ul>
      <li>To use the file's current name, click <b>Save</b> (or press Ctrl+S).  (For a new file being saved for the first time, this is equivalent to <b>Save As</b>.)</li>
      <li>To use a different name, click <b>Save As</b> (or press Ctrl+Shift+S).</li>
    </ul>
    <h3>Edit a MIDI file</h3>
    <blockquote><strong>Warning:</strong>  MIDI file editing is for expert users only.  If not done correctly, it could result in data corruption, making the file unusable.  Proceed at your own risk!</blockquote>
    <ul>
      <li>To create a new track (MTrk chunk), position the cursor in the track <em>before</em> which you want the new track to appear, and click <b>Trac<u>k</u></b> (or press Alt+K).  A new MTrk chunk (with an End of Track meta-event) should appear <em>after</em> the track containing the selected row.</li>
      <li>To create a new MTrk event, position the cursor on the row <em>before</em> which you want the new event to appear, click the appropriate button and provide the required input (see table below).  (Note that <b><u>D</u>elta-time</b> is required for all events.)  The new event should appear <em>after</em> the selected row.</li>
    </ul>
    <table>
      <thead><tr><th>Event</th><th>Button</th><th>Required Input</th></tr></thead>
      <tbody>
        <tr>
          <td>MIDI channel message</td>
          <td><b><u>C</u>hannel Event</b></td>
          <td>
            <ul>
              <li><b><u>R</u>unning status</b></li>
              <li>If <b><u>R</u>unning status</b> is not checked:
                <ul>
                  <li><b><u>M</u>essage type</b></li>
                  <li><b><u>C</u>hannel</b></li>
                </ul>
              </li>
              <li><b>Data <u>1</u></b> (interpreted as you type, based on <b><u>M</u>essage type</b> and <b><u>C</u>hannel</b>)</li>
              <li>If <b><u>M</u>essage type</b> is not Program Change or Channel Pressure (Aftertouch), <b>Data <u>2</u></b> (interpreted as you type, based on <b><u>M</u>essage type</b>)</li>
            </ul>
          </td>
        </tr>
        <tr>
          <td>system exclusive (sysex) message</td>
          <td><b>SysE<u>x</u> Event</b></td>
          <td>
            <ul>
              <li><b><u>E</u>scape</b></li>
              <li><b>D<u>a</u>ta</b>
                <ul>
                  <li>must be entered as hex</li>
                  <li>interpreted as you type (to the extent possible) as plain text, which is not directly editable</li>
                </ul>
              </li>
            </ul>
          </td>
        </tr>
        <tr>
          <td>meta-event</td>
          <td><b><u>M</u>eta-event</b></td>
          <td>
            <ul>
              <li><b><u>T</u>ype</b> (interpreted as you type, for known meta-events)</li>
              <li><b>D<u>a</u>ta</b>
                <ul>
                  <li>must be entered as hex if <b><u>T</u>ype</b> is any of the following:
                    <ul>
                      <li>0 (Sequence Number)</li>
                      <li>32 (MIDI Channel Prefix)</li>
                      <li>47 (End of Track)</li>
                      <li>81 (Set Tempo)</li>
                      <li>84 (SMPTE Offset)</li>
                      <li>88 (Time Signature)</li>
                      <li>89 (Key Signature)</li>
                    </ul>
                  </li>
                  <li>otherwise, can be entered as hex or plain text</li>
                  <li>interpreted as you type, based on <b><u>T</u>ype</b></li>
                </ul>
              </li>
            </ul>
          </td>
        </tr>
      </tbody>
    </table>
    <ul>
      <li>To edit the properties of an event or the file header (the data of the MThd chunk), position the cursor on the item you want to edit, click <b>Properties</b> (or press F4) and edit the properties as desired.  (Note that some properties cannot be edited once the item is created.)</li>
      <li>To delete an event, position the cursor on the event you want to delete, and click <b>Delete</b> (or press Del).</li>
      <li>To delete an entire chunk (e.g., a track), position the cursor on the first row of the chunk, and click <b>Delete</b> (or press Del).  (You should receive a warning that the entire chunk will be deleted.)</li>
    </ul>
    <h3>MIDI file playback</h3>
    <p>When a MIDI file is opened or saved, MIDIopsy also loads it for media playback.  (A new file must be saved before it can be played.)  If the file has not been saved since it was last edited, it must be saved in order to play the current version (with the most recent edits).</p>
    <p>Playback starts at the indicated <b>S<u>t</u>arting Position</b> (SP), which can be set to any position within the indicated <b><u>D</u>uration</b>.  When a file is loaded for playback, its <b>S<u>t</u>arting Position</b> defaults to 00:00:00, and its <b><u>D</u>uration</b> is determined.  During playback, the current <b><u>P</u>osition</b> is updated.</p>
    <ul>
      <li>To start playing the file, click <b>Play</b> (or press F5).  To stop playback, click <b>Stop</b> (or press F5 again).</li>
      <li>To reset the <b>S<u>t</u>arting Position</b> back to 00:00:00, click <b>Reset SP</b> (or press F6).  The starting position should flash <span style="font-weight: bold; background-color: orange;">orange</span> to indicate that it has been reset.</li>
      <li>To "synchronize" the <b>S<u>t</u>arting Position</b> (i.e., set it equal to the current <b><u>P</u>osition</b>), click <b>Sync SP</b> (or press F7).  The starting position should flash <span style="font-weight: bold; background-color: yellow;">yellow</span> to indicate that it has been synchronized.</li>
    </ul>
    <h2>Keyboard Shortcuts</h2>
    <table>
      <caption>Opening Screen</caption>
      <thead><tr><th>Command</th><th>Shortcut</th></tr></thead>
      <tbody>
        <tr><td>New</td><td>Ctrl+N</td></tr>
        <tr><td>Open</td><td>Ctrl+O</td></tr>
        <tr><td>Settings</td><td>Alt+S</td></tr>
        <tr><td>Help</td><td>F1</td></tr>
        <tr><td>About</td><td>Alt+A</td></tr>
        <tr><td>Open Recent</td><td>Alt+<i>number</i></td></tr>
      </tbody>
    </table><br />
    <table>
      <caption>Editing Screen</caption>
      <thead><tr><th>Group</th><th>Command</th><th>Shortcut</th></tr></thead>
      <tbody>
        <tr><td rowspan="6"></td><td>Save</td><td>Ctrl+S</td></tr>
        <tr><td>Save As</td><td>Ctrl+Shift+S</td></tr>
        <tr><td>Done</td><td>Esc</td></tr>
        <tr><td>Settings</td><td>Alt+S</td></tr>
        <tr><td>Help</td><td>F1</td></tr>
        <tr><td>About</td><td>Alt+A</td></tr>
        <tr><td rowspan="4">New Items</td><td>Track</td><td>Alt+K</td></tr>
        <tr><td>Channel Event</td><td>Alt+C</td></tr>
        <tr><td>SysEx Event</td><td>Alt+X</td></tr>
        <tr><td>Meta-event</td><td>Alt+M</td></tr>
        <tr><td rowspan="2">Edit Items</td><td>Properties</td><td>F4</td></tr>
        <tr><td>Delete</td><td>Del</td></tr>
        <tr><td rowspan="7">Playback</td><td>Play</td><td rowspan="2">F5</td></tr>
        <tr><td>Stop</td></tr>
        <tr><td>Starting Position (SP)</td><td>Alt+T</td></tr>
        <tr><td>Reset SP</td><td>F6</td></tr>
        <tr><td>Sync SP</td><td>F7</td></tr>
        <tr><td>Position</td><td>Alt+P</td></tr>
        <tr><td>Duration</td><td>Alt+D</td></tr>
      </tbody>
    </table>
    <h2>Online Resources</h2>
    <ul>
      <li><a target="_blank" href="https://jeffbourdier.github.io/midiopsy">MIDIopsy Home Page</a></li>
      <li><a target="_blank" href="https://www.midi.org/">The MIDI Association</a></li>
      <li><a target="_blank" href="http://midi.teragonaudio.com/tech/midifile.htm">Standard MIDI File (SMF) Format</a></li>
    </ul>
    <h6>&copy; 2018-20 Jeffrey Paul Bourdier</h6>
  </body>
</html>
